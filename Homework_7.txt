1)
student@Ubuntu-MySQL-VirtualBox:~$ sudo apt-add-repository http://nginx.org/packages/ubuntu/
[sudo] пароль для student: 
student@Ubuntu-MySQL-VirtualBox:~$ cat /etc/apt/sources.list | grep -v ^# | grep -v ^$
deb http://ru.archive.ubuntu.com/ubuntu/ xenial main restricted
deb http://ru.archive.ubuntu.com/ubuntu/ xenial-updates main restricted
deb http://ru.archive.ubuntu.com/ubuntu/ xenial universe
deb http://ru.archive.ubuntu.com/ubuntu/ xenial-updates universe
deb http://ru.archive.ubuntu.com/ubuntu/ xenial multiverse
deb http://ru.archive.ubuntu.com/ubuntu/ xenial-updates multiverse
deb http://ru.archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse
deb http://security.ubuntu.com/ubuntu xenial-security main restricted
deb http://security.ubuntu.com/ubuntu xenial-security universe
deb http://security.ubuntu.com/ubuntu xenial-security multiverse
deb http://nginx.org/packages/ubuntu/ xenial main
student@Ubuntu-MySQL-VirtualBox:~$ sudo apt update
Сущ:1 http://ppa.launchpad.net/linuxuprising/java/ubuntu xenial InRelease
Пол:2 http://nginx.org/packages/ubuntu xenial InRelease [4 354 B]                                                    
Сущ:3 http://ppa.launchpad.net/webupd8team/java/ubuntu xenial InRelease                                              
Ошб:2 http://nginx.org/packages/ubuntu xenial InRelease                                 
  Следующие подписи не могут быть проверены, так как недоступен открытый ключ: NO_PUBKEY ABF5BD827BD9BF62
Сущ:4 http://ru.archive.ubuntu.com/ubuntu xenial InRelease
Сущ:5 http://ru.archive.ubuntu.com/ubuntu xenial-updates InRelease                                      
Сущ:6 http://ru.archive.ubuntu.com/ubuntu xenial-backports InRelease                                                 
Пол:7 http://security.ubuntu.com/ubuntu xenial-security InRelease [99,8 kB]                                          
Пол:8 https://esm.ubuntu.com/infra/ubuntu xenial-infra-security InRelease [7 515 B]
Пол:9 https://esm.ubuntu.com/infra/ubuntu xenial-infra-updates InRelease [7 475 B]
Сущ:10 https://dbeaver.io/debs/dbeaver-ce  InRelease                                                                 
Пол:11 https://esm.ubuntu.com/infra/ubuntu xenial-infra-security/main amd64 Packages [281 kB]                        
Пол:12 https://esm.ubuntu.com/infra/ubuntu xenial-infra-security/main i386 Packages [144 kB]                         
Чтение списков пакетов… Готово                                                                                       
W: Ошибка GPG: http://nginx.org/packages/ubuntu xenial InRelease: Следующие подписи не могут быть проверены, так как недоступен открытый ключ: NO_PUBKEY ABF5BD827BD9BF62
E: Репозиторий «http://nginx.org/packages/ubuntu xenial InRelease» не подписан.
N: Обновление из этого репозитория нельзя выполнить безопасным способом, поэтому по умолчанию он отключён.
N: Информацию о создании репозитория и настройках пользователя смотрите в справочной странице apt-secure(8).
student@Ubuntu-MySQL-VirtualBox:~$ wget http://nginx.org/keys/nginx_signing.key
--2022-01-27 19:00:15--  http://nginx.org/keys/nginx_signing.key
Распознаётся nginx.org (nginx.org)... 52.58.199.22, 3.125.197.172, 2a05:d014:edb:5704::6, ...
Подключение к nginx.org (nginx.org)|52.58.199.22|:80... соединение установлено.
HTTP-запрос отправлен. Ожидание ответа... 200 OK
Длина: 1561 (1,5K) [application/octet-stream]
Сохранение в каталог: ««nginx_signing.key»».

nginx_signing.key             100%[===============================================>]   1,52K  --.-KB/s    in 0s      

2022-01-27 19:00:15 (169 MB/s) - «nginx_signing.key» сохранён [1561/1561]

student@Ubuntu-MySQL-VirtualBox:~$ sudo apt-key add nginx_signing.key
OK
student@Ubuntu-MySQL-VirtualBox:~$ sudo apt update
Пол:1 http://nginx.org/packages/ubuntu xenial InRelease [4 354 B]
Сущ:2 http://ru.archive.ubuntu.com/ubuntu xenial InRelease
Сущ:3 http://ru.archive.ubuntu.com/ubuntu xenial-updates InRelease                                                   
Сущ:4 http://ppa.launchpad.net/linuxuprising/java/ubuntu xenial InRelease                                            
Сущ:5 http://ru.archive.ubuntu.com/ubuntu xenial-backports InRelease                                                 
Сущ:6 http://ppa.launchpad.net/webupd8team/java/ubuntu xenial InRelease                                              
Пол:7 http://security.ubuntu.com/ubuntu xenial-security InRelease [99,8 kB]                                          
Сущ:8 https://esm.ubuntu.com/infra/ubuntu xenial-infra-security InRelease
Сущ:9 https://esm.ubuntu.com/infra/ubuntu xenial-infra-updates InRelease
Сущ:10 https://dbeaver.io/debs/dbeaver-ce  InRelease
Получено 99,8 kB за 1с (54,6 kB/s)
Чтение списков пакетов… Готово
Построение дерева зависимостей       
Чтение информации о состоянии… Готово
Все пакеты имеют последние версии.
student@Ubuntu-MySQL-VirtualBox:~$ apt download nginx
Пол:1 http://ru.archive.ubuntu.com/ubuntu xenial-updates/main amd64 nginx all 1.10.3-0ubuntu0.16.04.5 [3 494 B]
Получено 3 494 B за 0с (11,6 kB/s)
student@Ubuntu-MySQL-VirtualBox:~$ ls
examples.desktop  nginx_1.10.3-0ubuntu0.16.04.5_all.deb  snap   Документы  Изображения  Общедоступные  Шаблоны
lessons           nginx_signing.key 
student@Ubuntu-MySQL-VirtualBox:~$ sudo dpkg -i nginx_1.10.3-0ubuntu0.16.04.5_all.deb
Выбор ранее не выбранного пакета nginx.
(Чтение базы данных … на данный момент установлено 222532 файла и каталога.)
Подготовка к распаковке nginx_1.10.3-0ubuntu0.16.04.5_all.deb …
Распаковывается nginx (1.10.3-0ubuntu0.16.04.5) …
dpkg: зависимости пакетов не позволяют настроить пакет nginx:
 nginx зависит от nginx-core (>= 1.10.3-0ubuntu0.16.04.5) | nginx-full (>= 1.10.3-0ubuntu0.16.04.5) | nginx-light (>= 1.10.3-0ubuntu0.16.04.5) | nginx-extras (>= 1.10.3-0ubuntu0.16.04.5), однако:
  Пакет nginx-core не установлен.
  Пакет nginx-full не установлен.
  Пакет nginx-light не установлен.
  Пакет nginx-extras не установлен.
 nginx зависит от nginx-core (<< 1.10.3-0ubuntu0.16.04.5.1~) | nginx-full (<< 1.10.3-0ubuntu0.16.04.5.1~) | nginx-light (<< 1.10.3-0ubuntu0.16.04.5.1~) | nginx-extras (<< 1.10.3-0ubuntu0.16.04.5.1~), однако:
  Пакет nginx-core не установлен.
  Пакет nginx-full не установлен.
  Пакет nginx-light не установлен.
  Пакет nginx-extras не установлен.

dpkg: ошибка при обработке пакета nginx (--install):
 проблемы зависимостей — оставляем не настроенным
При обработке следующих пакетов произошли ошибки:
 nginx
student@Ubuntu-MySQL-VirtualBox:~$ sudo dpkg -r nginx
(Чтение базы данных … на данный момент установлено 222534 файла и каталога.)
Удаляется nginx (1.10.3-0ubuntu0.16.04.5) …

2)

student@Ubuntu-MySQL-VirtualBox:~$ snap find chrome
Name                   Version                 Publisher           Notes    Summary
chromeos-themes        2020-01-18-25-g765be0e  gantonayde          -        ChromeOS GTK Themes for GTK Snaps
chrome-log-beautifier  1.0.0                   arthursonzogni      -        An interactive terminal UI for analysing Chrome logs.
chromium               97.0.4692.99            canonical✓          -        Chromium web browser, open-source version of Chrome
postman                9.11.0                  postman-inc✓        -        API Development Environment
keepassxc              2.6.6                   keepassxreboot      -        Modern, secure, and cross-platform password manager compatible with KeePass
firefox                96.0.2-1                mozilla✓            -        Mozilla Firefox web browser
polar-bookshelf        1.100.13                inputneuron         -        Polar Bookshelf - Manager for web, books, PDFs + notes
tizonia                0.22.0                  tizonia             -        Cloud music from the Linux terminal
imagenes               2.0.459                 ubunturox104        -        An Electron-based Google Photos client
skrifa                 0.2.6                   hyuchia             -        A simple word processor built with web technologies
telemetrytv            4.1.9                   telemetrytv3        -        TelemetryTV Player
node                   16.13.2                 iojs✓               classic  Node.js
vectr                  0.1.15                  vectr✓              -        Vectr is a free graphics editor used to create vector graphics easily and intuitively.
vsslagent              1.18                    vssl                -        VSSL REST api.
joplin-arnatious       1.0.224                 arnatious           -        Joplin is a free, open source note taking and to-do application.
pocket-browser         1.7.0                   pocketinc           -        An open-source browser made for privacy and going towards security!
dashkiosk              v2.7.3                  ogra                -        Drive a set of screens displaying dashboards
strimio-desktop        2.33.12                 strimio             -        Strimio is a free cloud-based streaming service that provides you access to live streams from all over the world
puppetry               3.2.6                   dsheiko             -        Puppetry - codeless end-to-end test automation, integrated with CI/CD pipeline
red-app                7.0                     keshavnrj           -        Complete Youtube Desktop Applications
orange-app             5.0                     keshavnrj           -        Complete SoundCloud Desktop Applications
office365webdesktop    0.7.0                   rafgui012           -        It is a simple desktop application for Office365 of the web version for linux
home-media-server      4.15.2                  hms                 -        Digital Media Server (UPnP, DLNA, HTTP)
voidstar               v1.38.0                 fenoll              -        void* casts files onto 2D/3D colored spaces for your mind blowing needs
enpass                 6.6.3.835               chrismin13          -        Offline Password Manager and Secure Vault. Saves and fill in all your passwords, cards and other details.
google-chat-electron   2.13.2                  ankurk91            -        Unofficial desktop app for Google Chat.
wise-highlights        1.1.5                   informawise         -        Manage your reading highlights.
accountable2you        2.1.5                   a2udeveloper        -        Accountable2You monitors device activity and sends reports to your chosen partner to help you stay accountable.
bitgesell-wallet       0.9.5                   epexa               -        Bitgesell Wallet - сross-platform wallet for BGL cryptocurrency.
appspace-app           2.40.0                  appspace-cloud-ops  -        Reach your workforce with digital signs and more.
gpassmanager           1.1.0                   injamulmd           -        CommandLine Password Manager
champ                  0.0.1~git               si-dz0ny            -        Plex 2nd screen player
vtest-chrome           1.1.1                   ms-viojh            -        vtest-chrome
vioj-chrome-test1      1.1.2                   ms-viojh            -        Snapcraft Forum
student@Ubuntu-MySQL-VirtualBox:~$ sudo snap install chromium
chromium 97.0.4692.99 from Canonical✓ installed
student@Ubuntu-MySQL-VirtualBox:~$ snap list
Name               Version                     Rev    Tracking       Publisher   Notes
bare               1.0                         5      latest/stable  canonical✓  base
chromium           97.0.4692.99                1878   latest/stable  canonical✓  -
chromium-ffmpeg    0.1                         24     latest/stable  canonical✓  -
core18             20211215                    2284   latest/stable  canonical✓  base
core20             20220114                    1328   latest/stable  canonical✓  base
gnome-3-28-1804    3.28.0-19-g98f9e67.98f9e67  161    latest/stable  canonical✓  -
gnome-3-38-2004    0+git.cd626d1               87     latest/stable  canonical✓  -
gtk-common-themes  0.1-59-g7bca6ae             1519   latest/stable  canonical✓  -
snapd              2.54.2                      14549  latest/stable  canonical✓  snapd
student@Ubuntu-MySQL-VirtualBox:~$ 


3)


student@Ubuntu-MySQL-VirtualBox:~$ sudo iptables -L
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         
student@Ubuntu-MySQL-VirtualBox:~$ sudo iptables -P INPUT DROP
student@Ubuntu-MySQL-VirtualBox:~$ sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT
student@Ubuntu-MySQL-VirtualBox:~$ sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT
student@Ubuntu-MySQL-VirtualBox:~$ sudo iptables -L
Chain INPUT (policy DROP)
target     prot opt source               destination         
ACCEPT     tcp  --  anywhere             anywhere             tcp dpt:ssh
ACCEPT     tcp  --  anywhere             anywhere             tcp dpt:http

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination  


4)
#losst.ru 

student@Ubuntu-MySQL-VirtualBox:~$ echo 1 | sudo tee /proc/sys/net/ipv4/ip_forward
student@Ubuntu-MySQL-VirtualBox:~$ sudo iptables -A FORWARD -i eth0 -o eth1 -p tcp --syn --dport 80 -m conntrack --ctstate NEW -j ACCEPT
student@Ubuntu-MySQL-VirtualBox:~$ sudo iptables -A FORWARD -i eth0 -o eth1 -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
student@Ubuntu-MySQL-VirtualBox:~$ sudo iptables -A FORWARD -i eth1 -o eth0 -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
student@Ubuntu-MySQL-VirtualBox:~$ sudo iptables -P FORWARD DROP
student@Ubuntu-MySQL-VirtualBox:~$ hostname -I
192.168.1.57 
student@Ubuntu-MySQL-VirtualBox:~$ sudo iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j DNAT --to-destination 192.168.1.57
student@Ubuntu-MySQL-VirtualBox:~$ sudo iptables -t nat -A POSTROUTING -o eth1 -p tcp --dport 80 -d 192.168.1.57 -j SNAT --to-source 192.168.1.57:8080
student@Ubuntu-MySQL-VirtualBox:~$ sudo iptables -L
Chain INPUT (policy DROP)
target     prot opt source               destination         
ACCEPT     tcp  --  anywhere             anywhere             tcp dpt:ssh
ACCEPT     tcp  --  anywhere             anywhere             tcp dpt:http

Chain FORWARD (policy DROP)
target     prot opt source               destination         
ACCEPT     tcp  --  anywhere             anywhere             tcp dpt:http flags:FIN,SYN,RST,ACK/SYN ctstate NEW
ACCEPT     all  --  anywhere             anywhere             ctstate RELATED,ESTABLISHED
ACCEPT     all  --  anywhere             anywhere             ctstate RELATED,ESTABLISHED

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination 





